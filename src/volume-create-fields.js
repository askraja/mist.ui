var VOLUME_CREATE_FIELDS = []

// cloud:
//   in: path
//   required: true
//   type: string
// size:
//   required: true
//   type: integer
//   description: Size of disk in Gb
// name:
//   required: true
//   type: string
//   description: Name of the disk
// location:
//   required: true
//   type: string
// ex_disk_type:
//   type: string
//   description: GCE-specific. One of 'pd-standard'(default) or 'pd-ssd'
// ex_volume_type:
//   type: string
//   description: EC2-specific. One of 'standard', 'io1', 'gp2', 'sc1', 'st1'
// ex_iops:
//   type: string
//   description: EC2-specific. Needs to be specified if volume_type='io1'

// AZURE ARM  
// https://docs.microsoft.com/en-us/rest/api/dtl/disks/createorupdate
VOLUME_CREATE_FIELDS.push({
    provider: 'azure_arm',
    fields: [{
        name: "host_caching",
        label: "Host caching",
        type: 'dropdown',
        value: "None",
        defaultValue: "None",
        required: true,
        show: true,
        onForm: 'createForm',
        errorMessage: "Please enter host caching policy of the disk",
        options: [{
            title: 'None',
            val: 'None',
        }, {
            title: 'Read Only',
            val: 'ReadOnly',
        }, {
            title: 'Read Write',
            val: 'ReadWrite',
        }]
    },
    {
        name: 'create_resource_group',
        h3: 'Resource group',
        type: 'radio',
        value: true,
        defaultValue: true,
        class: 'bind-both',
        helptext: 'Create the machine in a new resource group',
        show: true,
        required: false,
        excludeFromPayload: true,
        options: [{
            title: 'Create new',
            val: true,
        }, {
            title: 'Use existing',
            val: false,
        }],
    },{
        name: 'resource_group',
        type: 'text',
        value: '',
        defaultValue: '',
        show: false,
        excludeFromPayload: false
    },{
        name: 'ex_resource_group',
        label: 'Resource Group',
        type: 'mist_dropdown_searchable',
        loader: true,
        class: 'margin-bottom',
        value: '',
        defaultValue: '',
        search: '',
        show: false,
        excludeFromPayload: true,
        required: true,
        options: [],
        showIf: {
            fieldName: 'create_resource_group',
            fieldValues: [false],
        }
    },{
        name: 'new_resource_group',
        label: 'Resource Group name',
        type: 'text',
        value: '',
        class: 'margin-bottom',
        defaultValue: '',
        show: true,
        excludeFromPayload: true,
        required: false,
        helptext: '',
        showIf: {
            fieldName: 'create_resource_group',
            fieldValues: [true],
        }
    }, {
        name: 'storage_account_type',
        label: 'Storage account type',
        type: 'dropdown',
        value: 'StandardSSD_LRS',
        defaultValue: 'StandardSSD_LRS',
        helptext: 'Specify the storage account type for the managed disk.',
        show: true,
        required: true,
        options: [{
            title: 'Standard HDD',
            val: 'Standard_LRS'
        }, {
            title: 'Standard SSD',
            val: 'StandardSSD_LRS',	
        }, {
            title: 'Premium SSD',
            val: 'Premium_LRS',
        }],
    }]
});


// DIGITAL OCEAN
// https://developers.digitalocean.com/documentation/v2/#create-a-new-block-storage-volume
VOLUME_CREATE_FIELDS.push({
    provider: 'digitalocean',
    fields: [{
        name: "filesystem_type",
        type: 'dropdown',
        label: 'Filesystem type',
        value: "",
        defaultValue: "",
        helptext: "If a filesystem type is selected, the volume will automatically be formated to the specified filesystem type.",
        show: true,
        required: false,
        options: [{
            title: 'Do not automatically format.',
            val: '',
        }, {
            title: 'Ext4 filesystem type',
            val: 'ext4',
        },{
            title: 'XFS filesystem type',
            val: 'xfs',
        }]
    }]
});

// OPENSTACK
VOLUME_CREATE_FIELDS.push({
    provider: 'openstack',
    fields: []
});

// PACKET
VOLUME_CREATE_FIELDS.push({
    provider: 'packet',
    fields: []
});

// ALIYUN ECS
VOLUME_CREATE_FIELDS.push({
    provider: 'aliyun_ecs',
    fields: [{
        name: "disk_category",
        label: "Disk category *",
        type: 'dropdown',
        value: "cloud",
        defaultValue: "cloud",
        required: true,
        show: true,
        errorMessage: "Please enter disk's category",
        options: [{
            title: 'Basic cloud disk',
            val: 'cloud',
        }, {
            title: 'Efficiency cloud disk',
            val: 'cloud_efficiency'
        }, {
            title: 'Cloud SSD',
            val: 'cloud_ssd'
        }, {
            title: 'Cloud ESSD',
            val: 'cloud_essd'
        }]
    }, {
        name: "description",
        label: "Description",
        type: "textarea",
        value: "",
        defaultValue: "",
        show: true,
        required: false,
        helptext: "A human friendly description of the volume."
    }]
});


// GCE
VOLUME_CREATE_FIELDS.push({
    provider: 'gce',
    fields: [{
        name: "ex_disk_type",
        label: "External disk type",
        type: 'dropdown',
        value: "pd-standard",
        defaultValue: "pd-standard",
        required: true,
        show: true,
        errorMessage: "Please enter volume's type",
        options: [{
            title: 'pd-standard (default)',
            val: 'pd-standard',
        }, {
            title: 'pd-ssd',
            val: 'pd-ssd',
        }]
    }]
});


// EC2
VOLUME_CREATE_FIELDS.push({
    provider: 'ec2',
    fields: [{
        name: "ex_volume_type",
        label: "External volume type",
        type: 'dropdown',
        value: "standard",
        defaultValue: "standard",
        required: true,
        show: true,
        errorMessage: "Please enter volume's type",
        options: [{
            title: 'standard',
            val: 'standard',
        }, {
            title: 'General Purpose SSD (gp2)',
            val: 'gp2'
        }, {
            title: 'Provisioned IOPS SSD (io1)',
            val: 'io1'
        }, {
            title: 'Throughput Optimized HDD (st1)',
            val: 'st1'
        }, {
            title: 'Cold HDD (sc1)',
            val: 'sc1'
        }]
    }, {
        name: "ex_iops",
        label: "Number of I/O operations per second",
        type: 'number',
        min: 100,
        value: '',
        defaultValue: '',
        required: true,
        show: true,
        errorMessage: "Please enter volume's iops",
        helptext: "Maximum ratio is 50 IOPS/GiB. Range is 100 to 32000 IOPS for volumes in most regions",
        showIf: {
            fieldName: 'ex_volume_type',
            fieldValues: ['io1'],
        }
    }]
});
// KubeVirt
VOLUME_CREATE_FIELDS.push({
    provider: 'kubevirt',
    fields: [{
            name: "storage_class_name",
            label: "Storage Class",
            type: "text", //must make it a dropdown
            value: "",
            defaultValue: "",
            placeholder: "",
            helptext: "Enter the name of a storage class that is configured for dynamic provisioning.",
            errorMessage: "Please enter a storage class of the cluster.",
            show: true,
            required: true
        },
        {
            name: "volume_mode",
            label: "Volume Mode",
            type: "text",
            value: "Filesystem",
            defaultValue: "Filesystem",
            placeholder: "",
            helptext: "The acccepted modes are Filesystem or Block ",
            show: true,
            required: false
        },
        {
            name: "access_mode",
            label: "Access Mode",
            type: "text",
            value: "ReadWriteOnce",
            defaultValue: "ReadWriteOnce",
            placeholder: "",
            helptext: 'An access mode may be specified, valid values are ReadWriteOnce, ReadWriteMany, ReadOnlyMany',
            show: true,
            required: false,
        },
        {
            name: 'dynamic',
            label: 'Dynamic',
            type: 'toggle',
            value: true,
            defaultValue: true,
            excludeFromPayload: false,
            helptext: `If enabled you will create a Persistent Volume Claim
             that will be bound to a dynamically created Persistent Volume.
             If disabled a Persistent Volume will be created statically,
             admin privileges are required for this. The Persistent Volume
             will remain unbound.`,
            show: true,
            required: true,
        },{
            name: 'reclaim_policy',
            label: 'Reclaim Policy',
            type: 'text',
            value: 'Delete',
            defaultValue: 'Delete',
            show: true,
            required: false,
            helptext: 'Valid reclaim policies are Retain, Recycle and Delete',
            showIf:{
                fieldName: 'dynamic',
                fieldValues: [false],
            },
        },
        {
            name: 'volume_type',
            label: 'Volume Type',
            type: 'dropdown',
            value: 'awsElasticBlockStore',
            defaultValue: 'awsElasticBlockStore',
            show: true,
            required: false,
            helptext: 'Choose according to the cloud your cluster is located on.',
            showIf: {
                fieldName: 'dynamic',
                fieldValues: [false],
            },            
            options: [
                {val: 'awsElasticBlockStore', title: "AWS ELASTIC BlockStore"},
                {val: 'azureDisk', title: "Azure Disk"},
                {val:'azureFile', title: "Azure File"},
                {val: 'cephfs', title: 'CephFS'},
                {val: 'cinder', title: 'Cinder'},
                {val: 'csi', title: 'CSI'},
                {val: 'fc', title: 'Fibre Channel'},
                {val: 'flexVolume', title: 'Flex Volume'},
                {val: 'flocker', title: 'Flocker'},
                {val: 'gcePersistentDisk', title: "GCE Persistent Disk"},
                {val: 'glusterfs', title: 'Glusterfs'},
                {val: 'hostPath', title: 'Host Path (local only!)'},
                {val: 'iscsi', title: 'iSCSI'},
                {val: 'nfs', title: "NFS"},
                {val: 'photonPersistentDisk', title: 'Photon Persistent Disk'},
                {val: 'portworxVolume', title: 'Portworx Volume'},
                {val: 'quobyte', title: 'Quodbyte'},
                {val: 'rbd', title: 'Rados Block Device'},
                {val: 'scaleIO', title: 'ScaleIO'},
                {val: 'storageos', title: 'StorageOS'},
                {val: 'vsphereVolume', title: 'VSphere Volume'},
            ],
        },{
            name: 'volume_params',
            label: 'AWS params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for AWS BlockStore',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['awsElasticBlockStore'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },
            {
                name: 'volumeID',
                label: 'Volume ID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Unique ID of the persistent disk resource in AWS (Amazon EBS volume).',
            },
            {
                name: 'partition',
                label: 'Partition',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Integer. If 0 or empty it will mean /dev/sda, 1 will mean /dev/sda1 etc...',
            },
            {
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Azure Disk params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Azure Disk Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['azureDisk'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },
            {
                name: 'diskName',
                label: 'Disk Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'The Name of the data disk in the blob storage',
            },
            {
                name: 'diskURI',
                label: 'Disk URI',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'The URI the data disk in the blob storage',
            },
            {
                name: 'kind',
                label: 'Kind',
                type: 'text',
                value: 'shared',
                defaultValue: 'shared',
                show: true,
                required: false,
                helptext: `Expected values 
                           shared: multiple blob disks per storage account 
                           sedicated: single blob disk per storage account
                           managed: azure managed data disk (only in managed availability set).`,
            },
            {
                name: 'cachingMode',
                label: 'Caching Mode',
                type: 'text',
                value: 'None',
                defaultValue: 'None',
                show: true,
                required: false,
                helptext: 'Expected Values are None, Read Only or Read Write',
            },
            {
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Azure File params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Azure File Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['azureFile'],
            },
            options: [{
                name: 'secretName',
                label: 'Secret Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'The name of secret that contains Azure Storage Account Name and Key.',
            },
            {
                name: 'shareName',
                label: 'Share Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Share Name',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'CephFS params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for CephFS Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['cephfs'],
            },
            options: [{
                name: 'monitors',
                label: 'Monitors',
                type: 'text', //string array must fix api
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'A collection of Ceph monitors, delimit with a comma ",".',
            },
            {
                name: 'path',
                label: 'Path',
                type: 'text',
                value: '/',
                defaultValue: '/',
                show: true,
                required: false,
                helptext: 'Used as the mounted root, rather than the full Ceph tree.',
            },{
                name: 'secretFile',
                label: 'Secret File',
                type: 'text',
                value: '/etc/ceph/user.secret',
                defaultValue: '/etc/ceph/user.secret',
                show: true,
                required: false,
                helptext: 'SecretRef is reference to the authentication secret for User, default is empty.',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'SecretRef is reference to the authentication secret for User, default is empty.',
            },{
                name: 'user',
                label: 'User',
                type: 'text',
                value: 'admin',
                defaultValue: 'admin',
                show: true,
                required: false,
                helptext: 'User is the rados user name, default is admin.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Cinder params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Cinder Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['cinder'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'volumeID',
                label: 'Volume ID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Unique ID of the volume in cinder.',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Points to a secret object containing parameters used to connect to OpenStack.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'CSI params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for CSI Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['csi'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'driver',
                label: 'Driver',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: `Driver is the name of the CSI driver that handles this volume. 
                           Consult with your admin for the correct name as registered in the cluster.`,
            },{
                name: 'volumeAttributes',
                label: 'Volume Attributes',
                type: 'text',  // this one is an object
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: `VolumeAttributes stores driver-specific properties that are passed to the CSI driver. 
                           Consult your driver's documentation for supported values.`,
            },{
                name: 'nodePublishSecretRef',
                label: 'Node Publish Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `NodePublishSecretRef is a reference to the secret object containing sensitive
                            information to pass to the CSI driver to complete the CSI NodePublishVolume
                            and NodeUnpublishVolume calls. This field is optional, and may be empty if
                            no secret is required. If the secret object contains more than one secret,
                            all secret references are passed.`,
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'FC params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for FC Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['fc'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'lun',
                label: 'lun',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'FC target lun number. Optional',
            },{
                name: 'targetWWNs',
                label: 'Target wordwide names',
                type: 'text', //this is a tring array
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'FC target worldwide names (WWNs). Delimit with comma ",". Optional.',
            },{
                name: 'wwids',
                label: 'ww IDs',
                type: 'text', //this is a string array
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `FC volume world wide identifiers (wwids) Either wwids or combination of targetWWNs 
                           and lun must be set, but not both simultaneously. Delimit with comma ",". Optional.`,
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Flex Volume params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Flex Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['flexVolume'],
            },
            options: [{
                name: 'driver',
                label: 'Driver',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Driver is the name of driver to use for this volume.',
            },{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'options',
                label: 'options', 
                type: 'text',   //this is an object
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Extra command options if any.',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `Optional: SecretRef is reference to the secret object containing sensitive information to pass to the plugin scripts. This may be empty if no secret object is specified. If the secret object contains more than one secret, all secrets are passed to the plugin scripts.`,
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Flocker Volume params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Flocker Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['flocker'],
            },
            options: [{
                name: 'datasetName',
                label: 'Dataset Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Name of the dataset stored as metadata -> name on the dataset for Flocker should be considered as deprecated.',
            },{
                name: 'datasetUUID',
                label: 'Dataset UUID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'UUID of the dataset. This is the unique identifier of a Flocker dataset"',
            },
            ],
        },{
            name: 'volume_params',
            label: 'GCE Persistent Disk params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for GCE Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['gcePersistentDisk'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'partition',
                label: 'Partition',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Integer. If 0 or empty it will mean /dev/sda, 1 will mean /dev/sda1 etc...',
            },{
                name: 'pdName',
                label: 'Unique Name of PD',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Unique name of the PD resource in GCE. Used to identify the disk in GCE.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Glusterfs params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Glusterfs Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['glusterfs'],
            },
            options: [{
                name: 'endpoints',
                label: 'End Points Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'EndpointsName is the endpoint name that details Glusterfs topology.',
            },{
                name: 'path',
                label: 'Path',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Path is the Glusterfs volume path.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Host Path params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Host Path Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['hostPath'],
            },
            options: [{
                name: 'path',
                label: 'Path',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Path of the directory on the host. If the path is a symlink, it will follow the link to the real path.',
            },{
                name: 'type',
                label: 'Type',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Type for HostPath Volume Defaults to "".',
            },
            ],
        },{
            name: 'volume_params',
            label: 'iSCSI params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for iSCSI Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['iscsi'],
            },
            options: [{
                name: 'chapAuthDiscovery',
                label: 'Chap Authentication Discovery',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Support for iSCSI Discovery CHAP authentication.",
                show: true,
                required: false,
            },{
                name: 'chapAuthSession',
                label: 'CHAP Authentication Session',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Support for iSCSI Session CHAP authentication.",
                show: true,
                required: false,
            },{
	        name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'initiatorName',
                label: 'Initiator Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `Custom iSCSI Initiator Name. If initiatorName is specified 
with iscsiInterface simultaneously, new iSCSI interface <target portal>:<volume name> 
will be created for the connection.`,
            },{
                name: 'iqn',
                label: 'iSCSI Qualified Name', 
                type: 'text',
                value: 'default',
                defaultValue: 'default',
                show: true,
                required: false,
                helptext: 'Target iSCSI Qualified Name.',
            },{
                name: 'iscsiInterface',
                label: 'iSCSI Interface', 
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'iSCSI Interface Name that uses an iSCSI transport. Defaults to "default" (tcp).',
            },{
                name: 'lun',
                label: 'LUN Number', 
                type: 'text', //this is int
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Target iSCSI Lun number.',
            },{
                name: 'portals',
                label: 'iSCSI Portal List', 
                type: 'text', //string array
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `iSCSI Target Portal List. The portal is either an IP or ip_addr:port if the port is other than default (typically TCP ports 860 and 3260). Separate with comma ",".`,
            },{
                name: 'targetPortal',
                label: 'Target Portal', 
                type: 'text', 
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Target iSCSI Portal. The Portal is either an IP or ip_addr:port if the port is other than default (typically TCP ports 860 and 3260).',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `CHAP Secret for iSCSI target and initiator authentication`,
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Network File System params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for NFS Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['nfs'],
            },
            options: [{
                name: 'path',
                label: 'Path',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'PPath that is exported by the NFS server.',
            },{
                name: 'server',
                label: 'Server',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Server is the hostname or IP address of the NFS server.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Photon Persistent Disk params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Photon Persistent Disk Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['photonPersistentDisk'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'pdID',
                label: 'Photon Controller ID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'ID that identifies Photon Controller persistent disk.',
            },
            ],
        },{
            name: 'volume_params',
            label: 'Portworx params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Portworx Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['portworxVolume'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'volumeID',
                label: 'Volume ID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'VolumeID uniquely identifies a Portworx volume.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'Quobyte params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Quobyte Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['quobyte'],
            },
            options: [{
                name: 'group',
                label: 'Group',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: true,
                helptext: 'Group to map volume access to. Default is no group.',
            },{
                name: 'registry',
                label: 'Registry',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `Registry represents a single or multiple Quobyte Registry services specified as a string as host:port pair (multiple entries are separated with commas) which acts as the central registry for volumes.`,
            },{
                name: 'tenant',
                label: 'Tenant',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Tenant owning the given Quobyte volume in the Backend Used with dynamically provisioned Quobyte volumes, value is set by the plugin.',
            },{
                name: 'user',
                label: 'User',
                type: 'text',
                value: 'serviceaccount',
                defaultValue: 'serviceaccount',
                show: true,
                required: false,
                helptext: 'User to map volume access to. Defaults to serviceaccount user.',
            },{
                name: 'volume',
                label: 'Vloume',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Volume is a string that references an already created Quobyte volume by name.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'RBD params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for Rados Block Device Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['rbd'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'monitors',
                label: 'Monitors',
                type: 'text', //string array must fix api
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'A collection of Ceph monitors, delimit with a comma ",".',
            },{
                name: 'image',
                label: 'Image',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The rados image name.',
            },{
                name: 'keyring',
                label: 'Keyring',
                type: 'text',
                value: '/etc/ceph/keyring',
                defaultValue: '/etc/ceph/keyring',
                show: true,
                required: false,
                helptext: 'Keyring is the path to key ring for RBDUser. Default is /etc/ceph/keyring.',
            },{
                name: 'pool',
                label: 'Pool Name',
                type: 'text',
                value: 'rbd',
                defaultValue: 'rbd',
                show: true,
                required: false,
                helptext: 'The rados pool name. Default is rbd.',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'SecretRef is name of the authentication secret for RBDUser. If provided overrides keyring. Default is nil. ',
            },{
                name: 'user',
                label: 'User',
                type: 'text',
                value: 'admin',
                defaultValue: 'admin',
                show: true,
                required: false,
                helptext: 'User is the rados user name, default is admin.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'ScaleIO params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for ScaleIO Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['scaleIO'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'gateway',
                label: 'Gateway',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The host address of the ScaleIO API Gateway.',
            },{
                name: 'projectionDomain',
                label: 'Projection Domain',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The name of the ScaleIO Protection Domain for the configured storage.',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'SecretRef references to the secret for ScaleIO user and other sensitive information. If this is not provided, Login operation will fail. ',
            },{
                name: 'sslEnabled',
                label: 'Enable SSL',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Flag to enable/disable SSL communication with Gateway, default false.",
                show: true,
                required: false,
            },{
                name: 'storageMode',
                label: 'Storage Mode',
                type: 'text',
                value: 'ThinProvisioned',
                defaultValue: 'ThinProvisioned',
                show: true,
                required: false,
                helptext: 'Indicates whether the storage for a volume should be ThickProvisioned or ThinProvisioned. Default is ThinProvisioned.',
            },{
                name: 'storagePool',
                label: 'Storage Pool Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The ScaleIO Storage Pool associated with the protection domain.',
            },{
                name: 'system',
                label: 'System',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The name of the storage system as configured in ScaleIO.',
            },{
                name: 'volumeName',
                label: 'Volume Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The name of a volume already created in the ScaleIO system that is associated with this volume source.',
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'StorageOS params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for StorageOS Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['storageos'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'secretRef',
                label: 'Secret Reference',
                type: 'text', //this is a LocalObjectReference
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'SecretRef references to the secret for ScaleIO user and other sensitive information. If this is not provided, Login operation will fail. ',
            },{
                name: 'volumeName',
                label: 'Volume Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'The name of a volume already created in the ScaleIO system that is associated with this volume source.',
            },{
                name: 'volumeNamespace',
                label: 'Volume Namespace',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: `VolumeNamespace specifies the scope of the volume within StorageOS. If no namespace is specified then the Pod's namespace will be used. This allows the Kubernetes name scoping to be mirrored within StorageOS for tighter integration. Set VolumeName to any name to override the default behaviour. Set to "default" if you are not using namespaces within StorageOS. Namespaces that do not pre-exist within StorageOS will be created.`,
            },{
                name: 'readOnly',
                label: 'Read Only',
                type: 'toggle',
                value: false,
                defaultValue: false,
                excludeFromPayload: false,
                helptext: "Enabling it will force the ReadOnly property in VolumeMounts.",
                show: true,
                required: false,
            },
            ],
        },{
            name: 'volume_params',
            label: 'VSphere params',
            type: 'list',
            items: [],
            show: true,
            required: false,
            helptext: 'Parameters for VSphere Volume',
            horizontal: false,
            moderateTop: true,
            showIf:{
                fieldName: 'volume_type',
                fieldValues: ['vsphereVolume'],
            },
            options: [{
                name: 'fsType',
                label: 'Filesystem Type',
                type: 'text',
                value: 'ext4',
                defaultValue: 'ext4',
                show: true,
                required: true,
                helptext: 'The type of the filesystem, eg: "ext4", "xfs", "ntfs"',
            },{
                name: 'storagePolicyID',
                label: 'Storage Policy ID',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Storage Policy Based Management (SPBM) profile ID associated with the StoragePolicyName.',
            },{
                name: 'storagePolicyName',
                label: 'Storage Policy Name',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Storage Policy Based Management (SPBM) profile name.',
            },{
                name: 'volumePath',
                label: 'Volume Path',
                type: 'text',
                value: '',
                defaultValue: '',
                show: true,
                required: false,
                helptext: 'Path that identifies vSphere volume vmdk.',
            },
            ],
        },

    ]
});

VOLUME_CREATE_FIELDS.forEach(function(p) {
// add common machine properties fields
    var minimumSize = (p.provider == 'packet' && 10) ||
                      (p.provider == 'aliyun_ecs' && 5) || 1;
    p.fields.splice(0, 0, {
        name: 'size',
        label: 'Size in GB *',
        type: 'number',
        min: minimumSize,
        value: minimumSize,
        defaultValue: minimumSize,
        helptext: 'A minimum of '+minimumSize+' GB is required.',
        suffix: ' GB',
        show: true,
        required: true,
        options: [],
        custom: false
    });

    if (p.provider != 'packet') {
        p.fields.splice(0, 0, {
            name: "name",
            label: "Name *",
            type: "text",
            value: "",
            defaultValue: "",
            placeholder: "",
            errorMessage: "Please enter volume's name",
            show: true,
            required: true});
    }

    if (p.provider != 'openstack') {
        p.fields.splice(1, 0, {
            name: 'location',
            label: 'Location *',
            type: 'mist_dropdown',
            value: '',
            defaultValue: '',
            show: true,
            required: false, // non required for os, do, // required for azure
            options: []
        });
    }
});

